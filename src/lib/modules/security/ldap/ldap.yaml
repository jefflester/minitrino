---
services:

  minitrino:
    environment:
      CONFIG_PROPERTIES: http-server.authentication.type=PASSWORD
      MINITRINO_BOOTSTRAP: bootstrap-cluster.sh
    volumes:
      - ./modules/security/ldap/resources/cluster/password-authenticator.properties:/mnt/etc/password-authenticator.properties:ro
      - ./modules/security/ldap/resources/ldap/ldap-users:/mnt/etc/ldap-users:ro
    links:
      - ldap:ldap.minitrino.starburstdata.com

  ldap:
    image: osixia/openldap:${OPEN_LDAP_VER}
    container_name: ldap-${CLUSTER_NAME}
    hostname: ldap.minitrino.starburstdata.com
    environment:
      LDAP_ORGANISATION: Example Inc.
      LDAP_DOMAIN: example.com
      LDAP_ADMIN_PASSWORD: trinoRocks15
      LDAP_TLS_VERIFY_CLIENT: try
      LDAPTLS_REQCERT: never
    ports:
      - ${__PORT_LDAP}:636
    labels:
      - org.minitrino=root
      - org.minitrino.module.ldap=security-ldap
