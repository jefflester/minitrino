# Minitrino Release Notes: 3.0.1

## Release Overview

Minitrino 3.0.1 is a patch release that improves configuration parsing, modernizes
CI/CD infrastructure, and establishes comprehensive code quality standards.

**Key improvements:**

- Fixed critical config parsing bug with quoted values
- Modernized GitHub Actions with intelligent change detection and modular design
- Migrated to Ruff for faster linting and formatting
- Applied 238+ code quality fixes across entire codebase
- Enhanced pre-commit hooks with 10+ new quality checks

**Table of Contents:**

- [CLI Changes and Additions](#cli-changes-and-additions)
- [Other](#other)

## CLI Changes and Additions

### Configuration File Improvements

- **Quote stripping in config files**: Configuration values in `minitrino.cfg`
  can now include single or double quotes without causing parse errors. Quotes
  are automatically stripped when values are loaded, making config files more
  flexible and editor-friendly.

  **Example:**

  ```ini
  [config]
  LIB_PATH="/home/user/minitrino-lib"
  CLUSTER_NAME='my-cluster'
  IMAGE=trino
  ```

  All three formats above now work correctly, with quotes automatically removed
  during parsing. Previously, quoted values would fail to parse or include the
  quotes in the actual value.

## Other

### CI/CD Infrastructure

- **Modernized GitHub Actions workflows**: Replaced monolithic CI workflows with
  modular composite actions for better maintainability and reusability.

- **Intelligent change detection**: Image builds now run conditionally based on file
  changes, significantly reducing CI time and resource usage. When image files
  haven't changed, tests use existing images from the main branch.

- **Reusable composite actions**: Created 4 new composite actions to eliminate
  duplication across workflows:

  - `prepare-test-matrix` - Dynamic test matrix generation for parallel execution
  - `setup-docker-build` - Docker build environment with GHCR authentication
  - `setup-image-pull` - Conditional image pulling with fallback logic
  - `setup-test-environment` - Unified test environment setup

- **Improved test execution**: Enhanced parallel test execution with dynamic matrix
  generation for both Trino and Starburst test variants.

- **Dependabot automation**: Added comprehensive Dependabot configuration for
  automated dependency updates across Python packages, GitHub Actions, and
  Dockerfiles with intelligent grouping and security-critical dependency isolation.

### Code Quality & Tooling

- **Modernized pre-commit tooling**: Replaced Black, flake8, and isort with Ruff
  for faster, more comprehensive Python linting and formatting. Ruff provides all
  the functionality of the previous tools in a single, high-performance package.

- **Enhanced pre-commit hooks**: Added new universal linting and quality checks:

  - `docformatter` - Automatic docstring formatting
  - `mdformat` - Markdown formatting (replacing prettier)
  - `typos` - Spell checking for documentation files
  - `hadolint` - Dockerfile linting
  - `actionlint` - GitHub Actions workflow validation
  - General file checks (check-yaml, check-toml, check-json, check-merge-conflict, trailing-whitespace, end-of-file-fixer, check-added-large-files)

- **Security & code quality analysis (informational)**: Added non-blocking hooks:

  - `bandit` - Python security linter
  - `vulture` - Dead code detection
  - `deptry` - Dependency usage validation

- **Test validation hook**: Added `validate-pytest-collection` to ensure all tests
  can be collected without errors before commit.

- **Updated hook versions**:

  - shellcheck: v0.10.0 → v0.11.0
  - mypy: v1.16.1 → v1.18.1

- **Organized configuration**: Pre-commit config now uses clear section headers
  for better maintainability.

- **Applied comprehensive linting fixes**: Fixed 238+ code quality issues
  identified by new tooling including improved exception handling with proper
  chaining (15+ locations), modernized type annotations, simplified context
  managers, removed dead code, and standardized formatting across all modules.
  All Python files now comply with strict linting standards.

### Documentation

- **ReadTheDocs configuration fix**: Updated `.readthedocs.yaml` to use
  `extra_requirements` instead of deprecated `extras` field, resolving
  documentation build failures.
