version: "3.8"
services:

  trino:
    environment:
      MINITRINO_BOOTSTRAP: "bootstrap-trino.sh"
    
  test:
    build: 
      context: ./modules/catalog/test/
      labels: 
        - "com.starburst.tests=minitrino"
        - "com.starburst.tests.module.test=catalog-test"
    environment:
      MINITRINO_BOOTSTRAP: "bootstrap-test.sh"
    command: "tail -F anything" # Keep alive 
    image: "minitrino:test"
    container_name: "test"
    labels: 
      - "com.starburst.tests=minitrino"
      - "com.starburst.tests.module.test=catalog-test"
    volumes:
      - "test-data:/etc/test/"

volumes:
  test-data:
    labels:
      - "com.starburst.tests=minitrino"
      - "com.starburst.tests.module.test=catalog-test"
