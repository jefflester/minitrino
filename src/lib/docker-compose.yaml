---
services:

  minitrino:
    build:
      context: ./image/
      args:
        UBUNTU_VER: ${UBUNTU_VER}
        CLUSTER_VER: ${CLUSTER_VER}
        CLUSTER_DIST: ${CLUSTER_DIST}
        BUILD_USER: ${BUILD_USER}
      labels:
        - org.minitrino=root
        - org.minitrino.module=minitrino
    image: minitrino/cluster:${CLUSTER_VER}-${CLUSTER_DIST}
    container_name: minitrino-${CLUSTER_NAME}
    restart: 'no'
    ports:
      - ${__PORT_MINITRINO}:8080
    volumes:
      - ${LIC_PATH}:${LIC_MOUNT_PATH}
    labels:
      - org.minitrino=root
      - org.minitrino.module=minitrino

networks:
  default:
    name: minitrino_${CLUSTER_NAME}
    driver: bridge
    labels:
      - org.minitrino=root
      - org.minitrino.module=minitrino
